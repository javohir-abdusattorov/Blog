(function(t){function e(e){for(var r,i,n=e[0],l=e[1],c=e[2],d=0,g=[];d<n.length;d++)i=n[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&g.push(o[i][0]),o[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(t[r]=l[r]);u&&u(e);while(g.length)g.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],r=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(r=!1)}r&&(s.splice(e--,1),t=i(i.s=a[0]))}return t}var r={},o={app:0},s=[];function i(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=r,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(a,r,function(e){return t[e]}.bind(null,r));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0f2b":function(t,e,a){},"28f0":function(t,e,a){t.exports=a.p+"img/bootstrap-icons.6b935832.svg"},"31d8":function(t,e,a){"use strict";a("5845")},"42d7":function(t,e,a){"use strict";a("9a8b")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var r=a("2b0e"),o=a("2106"),s=a.n(o),i=a("8c4f"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[[t.authLoading||t.blogsLoading?t._e():a("router-view",{on:{loader:function(e){return t.loader(e)},login:function(e){return t.login(e)},logout:function(e){return t.logout()},redirect:function(e){return t.redirect(e)}}})],a("div",{ref:"loader",staticClass:"modal loading-modal",attrs:{tabindex:"-1",role:"dialog"}},[t._m(0)])],2)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"loader"}},[a("div",{staticClass:"loader-container"})])}],c=(a("96cf"),a("1da1")),u=a("1157"),d=a.n(u),g=a("bc3a"),m=a.n(g),p={methods:{checkAuthorization:function(){return Object(c["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=localStorage["access-token"],e){t.next=3;break}return t.abrupt("return",!1);case 3:return t.prev=3,t.next=6,m()({method:"get",url:"".concat("http://localhost:9000","/api/v1/auth/me"),headers:{Authorization:"Bearer ".concat(e)}});case 6:return a=t.sent,t.abrupt("return",{isAuthorized:!0,user:a.data.data});case 10:return t.prev=10,t.t0=t["catch"](3),console.error(t.t0),localStorage.removeItem("access-token"),t.abrupt("return",{isAuthorized:!1});case 15:case"end":return t.stop()}}),t,null,[[3,10]])})))()}}},h=(a("99af"),a("b0c0"),a("4fad"),a("3835")),f=a("b85c"),b=a("53ca"),v={methods:{validateType:function(t,e){return(!t||"string"!=e||"string"===typeof t)&&((!t||"number"!=e||"number"===typeof t)&&(("boolean"!=e||"boolean"===typeof t)&&((!t||"object"!=e||"object"===Object(b["a"])(t))&&!(t&&"array"==e&&!Array.isArray(t)))))},validateObject:function(t,e){if(!t)return"Invalid data! Please fill all required fields!";var a,r=Object(f["a"])(e);try{for(r.s();!(a=r.n()).done;){var o=a.value,s=o.name;if("boolean"!==o.type&&!t[s])return'Invalid data: "'.concat(s,'" is required');if("number"!=o.type||this.validateType(t[s],o.type)||(t[s]=+t[s]),"array"!=o.type||this.validateType(t[s],o.type)||(t[s]=JSON.parse(t[s])),"object"!=o.type||this.validateType(t[s],o.type)||(t[s]=JSON.parse(t[s])),!this.validateType(t[s],o.type))return'Invalid data: "'.concat(s,'" must be ').concat(o.type)}}catch(i){r.e(i)}finally{r.f()}return!1},createFormData:function(t){for(var e=new FormData,a=0,r=Object.entries(t);a<r.length;a++){var o=Object(h["a"])(r[a],2),s=o[0],i=o[1];if(i){var n="object"==Object(b["a"])(i)?JSON.stringify(i):i;e.append(s,n)}}return e}}},x={name:"App",data:function(){return{authLoading:!0,blogsLoading:!0}},methods:{loader:function(t){d()(this.$refs.loader).modal(t)},redirect:function(t){this.loader("hide"),this.$router.push({name:t})}},mixins:[p,v],created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("checkUserAuthorization");case 2:return t.authLoading=!1,t.loader("hide"),e.next=6,t.$store.dispatch("getAllBlogs");case 6:t.blogsLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},mounted:function(){(this.authLoading||this.blogsLoading)&&this.loader("show"),d()('[data-toggle="tooltip"]').tooltip()}},_=x,w=(a("034f"),a("2877")),y=Object(w["a"])(_,n,l,!1,null,null,null),C=y.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),t._m(0),a("h2",{staticClass:"text-center font-weight-light"},[t._v("Best blogs of today")]),a("div",{staticClass:"col-md-9 px-0 pb-5 mx-auto blogs-container"},[t._l(t.blogs,(function(t){return a("BlogCard",{key:t._id,attrs:{blogData:t}})})),a("div",{staticClass:"text-center py-3"},[a("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"blog.all"}}},[t._v("See all blogs")])],1)],2)],1)},$=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-9 mx-auto bg-white p-3 rounded my-5 shadow"},[a("h2",{staticClass:"text-center font-weight-light"},[t._v('About "Javohir Blog"')]),a("p",[t._v("lorem ipsum dolor sit amet consectetur, adipisicing elit. A, cumque placeat? Voluptates, voluptas, necessitatibus? Corporis, reiciendis, veritatis dolores mollitia, ratione rerum magni quia voluptatum hic corrupti asperiores consequuntur excepturi culpa nemo nobis, dolor? Quam voluptas illo incidunt voluptates, laboriosam architecto maxime porro vitae nemo doloremque accusamus, dolorem consequuntur? Modi sint numquam aut ipsum odio culpa incidunt quisquam tenetur. Delectus, eum saepe ipsum dignissimos sit doloremque possimus reiciendis corporis ab neque rerum, quaerat. Deserunt incidunt atque, rem nesciunt officiis eum voluptatibus laboriosam harum earum modi maiores veniam magni nisi quasi, dolores amet illo accusantium, repellendus mollitia nulla sequi. Excepturi soluta sit, deserunt sint eaque porro! Dolore provident amet libero. Dolores assumenda, architecto doloribus. Aspernatur minima accusantium expedita consequatur at ut rem sit labore asperiores possimus corporis, perferendis voluptatum mollitia voluptates voluptate ipsam aperiam vel dolores eum nisi quaerat fugit nesciunt dolorem odit. Id veniam accusamus magnam incidunt, molestias, expedita at reprehenderit. Dicta asperiores doloremque magnam repellendus porro quidem, sunt nemo, nobis enim perspiciatis hic ratione neque dolores sequi molestiae aspernatur, minima ex eveniet, fugit voluptatibus reiciendis. Et, eos saepe ipsa sunt laborum dicta, officia modi. Officiis dicta labore, vel id, cupiditate velit ratione ipsum voluptatem iure in veniam modi, laboriosam beatae.")])])}],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"navbar sticky-top navbar-expand-lg navbar-light bg-white shadow py-1"},[a("router-link",{staticClass:"navbar-brand d-flex align-items-center",attrs:{to:{name:"index"}}},[a("img",{staticClass:"d-inline-block align-top",attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Blogger.svg/603px-Blogger.svg.png",width:"40",height:"40"}}),a("p",{staticClass:"mb-0 ml-2"},[t._v("Javohir Blog")])]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbar-content"}},[t.authorized?a("ul",{staticClass:"navbar-nav align-items-center ml-auto"},[a("li",{class:{"nav-item":!0,active:"blog.all"==t.currentRoute}},[a("router-link",{staticClass:"nav-link py-1",attrs:{to:{name:"blog.all"}}},[t._v("All blogs")])],1),a("li",{class:{"nav-item":!0,active:"blog.my"==t.currentRoute}},[a("router-link",{staticClass:"nav-link py-1",attrs:{to:{name:"blog.my"}}},[t._v("My blogs")])],1),a("li",{class:{"nav-item":!0,active:"blog.create"==t.currentRoute}},[a("router-link",{staticClass:"nav-link py-1",attrs:{to:{name:"blog.create"}}},[t._v("Post new blog")])],1),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"btn btn-outline-danger ml-3 py-1",attrs:{type:"button"},on:{click:function(e){return t.logout()}}},[t._v("Logout")])])]):a("ul",{staticClass:"navbar-nav align-items-center ml-auto"},[a("li",{class:{"nav-item":!0,active:"blog.all"==t.currentRoute}},[a("router-link",{staticClass:"nav-link py-1",attrs:{to:{name:"blog.all"}}},[t._v("All blogs")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"btn btn-outline-primary ml-3 py-1",attrs:{to:{name:"auth.login"}}},[t._v("Sign up | Login")])],1)])])],1)])},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbar-content","aria-controls":"navbar-content","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],O={methods:{logout:function(){this.$store.dispatch("logout"),localStorage.removeItem("access-token"),this.$router.push({name:"auth.login"})}},computed:{authorized:function(){return this.$store.state.auth.isAuthorized},currentRoute:function(){return this.$route.name}}},N=O,D=Object(w["a"])(N,B,A,!1,null,"0c60e11d",null),L=D.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex align-items-start my-4 bg-white shadow rounded blog-card"},[r("div",{ref:"blog.image",staticClass:"border-right",attrs:{w:"25"}},[r("img",{staticClass:"blog-image img-fluid rounded-left",attrs:{src:t.blog.image,alt:"blog-image"}})]),r("div",{ref:"blog.info",staticClass:"px-3 pt-2 h-auto",attrs:{w:"75"}},[r("div",{staticClass:"d-flex justify-content-between"},[r("h3",{attrs:{w:t.anotherOptions?77:80}},[r("a",{staticClass:"text-dark text-decoration-none pointer vertical-center"},[t.blog.isAuthor?r("svg",{ref:"myblog-icon",staticClass:"bi d-inline-block text-primary mr-2 mt-1 pointer",attrs:{width:"20",height:"20","data-toggle":"tooltip",title:"Your blog"}},[r("use",{attrs:{"xlink:href":a("28f0")+"#person-circle"}})]):t._e(),r("router-link",{staticClass:"text-dark",attrs:{to:{name:"blog.detail",params:{id:t.blogData._id}}}},[t._v(t._s(t.blog.title))])],1)]),r("div",{attrs:{w:"20"}},[r("p",{staticClass:"mb-0 pt-1 vertical-center justify-content-end text-muted"},[r("img",{staticClass:"d-inline-block mr-2",attrs:{src:a("755b"),width:"18",height:"18"}}),t._v(" "+t._s(t.blog.postedAt)+" ")])]),t.anotherOptions?r("div",{staticClass:"ml-2 vertical-center"},[r("div",{staticClass:"dropdown mb-1"},[r("button",{staticClass:"btn dropdown-toggle shadow-none p-0 d-flex vertical-center",attrs:{type:"button",id:"another-options-btn","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[r("svg",{staticClass:"bi d-inline-block pointer",attrs:{width:"20",height:"20"}},[r("use",{attrs:{"xlink:href":a("28f0")+"#three-dots"}})])]),r("div",{staticClass:"dropdown-menu shadow",attrs:{"aria-labelledby":"another-options-btn"}},t._l(t.anotherOptions,(function(e){return r("a",{key:e.id,class:["dropdown-item","pointer","text-"+e.color],on:{click:function(a){return e.run(t.blogData)}}},[t._v(t._s(e.name))])})),0)])]):t._e()]),r("p",{staticClass:"font-italic"},[t._v(t._s(t.blog.content))]),r("div",{staticClass:"d-flex justify-content-between align-items-center pb-3"},[r("p",{staticClass:"mb-0"},[t._v("Author: "),r("span",{staticClass:"font-weight-500 pointer"},[t._v(t._s(t.blog.author))])]),t.auth.isAuthorized?r("div",{staticClass:"vertical-center"},[r("svg",{staticClass:"bi mr-1 text-danger pointer",attrs:{width:"18",height:"18"},on:{click:function(e){return t.likeBlog()}}},[t.blog.isLiked?r("use",{attrs:{"xlink:href":a("28f0")+"#heart-fill"}}):r("use",{attrs:{"xlink:href":a("28f0")+"#heart"}})]),r("p",{class:{"font-weight-500":!0,"mb-0":!0,"text-muted":!t.blog.isLiked,"text-danger":t.blog.isLiked}},[t._v(t._s(t.blog.likes))])]):t._e()])])])},q=[],R=(a("fb6a"),a("4de4"),a("d81d"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("2909")),S={methods:{getAllBlogs:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({method:"get",url:"".concat("http://localhost:9000","/api/v1/blogs/all")});case 3:if(a=e.sent,t.isAuthorized){e.next=6;break}return e.abrupt("return",a.data.data);case 6:return r=a.data.data.map((function(e){return e.isLiked=t.user.likedBlogs.some((function(t){return t.blog===e._id})),e})),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e["catch"](0),console.error(e.t0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},toggleLikeRequest:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({method:"put",url:"".concat("http://localhost:9000","/api/v1/blogs/toggle-like"),headers:{Authorization:"Bearer ".concat(localStorage["access-token"])},data:t});case 3:return a=e.sent,e.abrupt("return",a.data.data);case 7:return e.prev=7,e.t0=e["catch"](0),e.abrupt("return",console.error(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},deleteBlog:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()({method:"delete",url:"".concat("http://localhost:9000","/api/v1/blogs/delete/").concat(t._id),headers:{Authorization:"Bearer ".concat(localStorage["access-token"])}});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e["catch"](0),e.abrupt("return",console.error(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))()}},computed:{filteredBlogs:function(){var t=this,e=Object(R["a"])(this.blogs),a=this.sortBy;if(this.filter.searchTitle.length){var r=new RegExp(this.filter.searchTitle,"gi");e=e.filter((function(t){return t.title.match(r)}))}if(this.filter.searchAuthor.length){var o=new RegExp(this.filter.searchAuthor,"gi");e=e.filter((function(t){return t.author.name.match(o)}))}if(this.filter.searchContent.length){var s=new RegExp(this.filter.searchContent,"gi");e=e.filter((function(t){return t.content.match(s)}))}return"none"!==a&&("createdAt+"==a?e=e.sort((function(t,e){return new Date(e.createdAt)-new Date(t.createdAt)})):"createdAt-"==a?e=e.sort((function(t,e){return new Date(t.createdAt)-new Date(e.createdAt)})):"likes+"==a?e=e.sort((function(t,e){return e.likes-t.likes})):"likes-"==a?e=e.sort((function(t,e){return t.likes-e.likes})):"user-liked"==a&&(e=e.sort((function(e,a){var r=t.auth.user.likedBlogs.some((function(t){return t.blog===e._id})),o=t.auth.user.likedBlogs.some((function(t){return t.blog===a._id}));return r&&o?0:!r&&o?1:r&&!o?-1:0})))),e}}},E={props:{blogData:{type:Object,required:!0},anotherOptions:Array},data:function(){return{blog:{title:"",likes:0,image:"",content:"",author:"",isLiked:!1,isAuthor:!1},toggleLikeLoading:!1}},methods:{likeBlog:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.toggleLikeLoading||!t.auth.isAuthorized){e.next=10;break}return t.toggleLikeLoading=!0,a=t.blog.isLiked?"-":"+",r={blog:t.blogData._id,action:a},e.next=6,t.toggleLikeRequest(r);case 6:o=e.sent,t.$store.dispatch("toggleLike",{data:r,user:o}),t.createBlogData(),t.toggleLikeLoading=!1;case 10:case"end":return e.stop()}}),e)})))()},createBlogData:function(){this.blog.title=this.blogData.title,this.blog.isLiked=this.blogData.isLiked,this.blog.likes=this.blogData.likes,this.blog.image="".concat("http://localhost:9000","/").concat(this.blogData.image),this.blog.content=this.blogData.content.slice(0,313)+"...",this.blog.author=this.blogData.author.name;var t=new Date(this.blogData.createdAt),e=t.getMonth()+1,a=t.getDate();e<10&&(e="0".concat(e)),a<10&&(a="0".concat(a));var r="".concat(a,".").concat(e,".").concat(t.getFullYear()),o="".concat(t.getHours(),":").concat(t.getMinutes());this.blog.postedAt="".concat(r," ").concat(o),this.auth.isAuthorized&&this.auth.user._id===this.blogData.author.author&&(this.blog.isAuthor=!0)}},computed:{auth:function(){return this.$store.state.auth}},mixins:[S],created:function(){this.createBlogData()},mounted:function(){var t="".concat(this.$refs["blog.info"].offsetHeight,"px");d()(this.$refs["blog.image"]).css("height",t),d()(this.$refs["myblog-icon"]).tooltip()}},M=E,z=(a("31d8"),Object(w["a"])(M,j,q,!1,null,"b8b36316",null)),P=z.exports,T={data:function(){return{}},methods:{},computed:{blogs:function(){return this.$store.getters.getBestBlogsOfToday}},components:{Navbar:L,BlogCard:P}},I=T,J=Object(w["a"])(I,k,$,!1,null,"0604d4b9",null),F=J.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"col-md-5 mx-auto bg-white rounded shadow pt-3 px-4 my-5"},[a("h2",{staticClass:"text-center font-weight-light"},[t._v("Register")]),a("form",{on:{submit:function(e){return t.register(e)}}},[a("div",{staticClass:"form-group mb-4"},[a("label",{attrs:{for:"user-name"}},[t._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{type:"text",id:"user-name",placeholder:"Enter your name",required:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),a("div",{staticClass:"form-group mb-4"},[a("label",{attrs:{for:"user-email"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],staticClass:"form-control",attrs:{type:"email",id:"user-email",placeholder:"Enter your email",required:""},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}})]),a("div",{staticClass:"form-group mb-4"},[a("label",{attrs:{for:"user-password"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"user-password",placeholder:"Enter your password",autocomplete:"new-password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("p",{staticClass:"text-center text-danger font-weight-500"},[t._v(t._s(t.validation.errorMessage))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.validation.success,expression:"validation.success"}],staticClass:"text-center text-success font-weight-500"},[t._v("You registred successfuly!")]),t._m(0),a("p",{staticClass:"mt-4 mb-1 text-center"},[t._v("Aleardy have an account? "),a("router-link",{attrs:{to:{name:"auth.login"}}},[t._v("Login")])],1),a("p",{staticClass:"pb-3 text-center"},[a("router-link",{attrs:{to:{name:"index"}}},[t._v("Home page")])],1)])])])},H=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Register")])])}],Y={data:function(){return{user:{name:"",email:"",password:""},validation:{success:!1,errorMessage:""}}},methods:{register:function(t){var e=this;t.preventDefault();var a=JSON.parse(JSON.stringify(this.user)),r=this.validateObject(a,[{name:"name",type:"string"},{name:"email",type:"string"},{name:"password",type:"string"}]);if(r)return this.validation.errorMessage=r;this.$emit("loader","show"),this.axios({method:"post",url:"".concat("http://localhost:9000","/api/v1/auth/register"),data:a}).then((function(t){e.validation.success=!0,e.$store.dispatch("login",t.data.user),localStorage["access-token"]=t.data.token,e.$emit("redirect","index")})).catch((function(t){var a=t.response.data.error?t.response.data.error:t.message;e.validation.errorMessage=a})).then((function(){e.$emit("loader","hide")}))}},mixins:[v],created:function(){this.$store.state.auth.isAuthorized&&this.$emit("redirect","index")}},Q=Y,V=Object(w["a"])(Q,U,H,!1,null,"1cb7a276",null),G=V.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"col-md-4 mx-auto bg-white rounded shadow pt-3 px-4 my-5"},[a("h2",{staticClass:"text-center font-weight-light"},[t._v("Login")]),a("form",{on:{submit:function(e){return t.login(e)}}},[a("div",{staticClass:"form-group mb-4"},[a("label",{attrs:{for:"user-name"}},[t._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"form-control",attrs:{type:"text",id:"user-name",placeholder:"Enter your name",required:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}})]),a("div",{staticClass:"form-group mb-4"},[a("label",{attrs:{for:"user-password"}},[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"user-password",placeholder:"Enter your password",required:""},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}})]),a("p",{staticClass:"text-center text-danger font-weight-500"},[t._v(t._s(t.validation.errorMessage))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.validation.success,expression:"validation.success"}],staticClass:"text-center text-success font-weight-500"},[t._v("You logged in successfuly!")]),t._m(0),a("p",{staticClass:"mt-4 mb-1 text-center"},[t._v("Doesn't have an account? "),a("router-link",{attrs:{to:{name:"auth.register"}}},[t._v("Register")])],1),a("p",{staticClass:"pb-3 text-center"},[a("router-link",{attrs:{to:{name:"index"}}},[t._v("Home page")])],1)])])])},W=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Submit")])])}],X={data:function(){return{user:{name:"",email:""},validation:{success:!1,errorMessage:""}}},methods:{login:function(t){var e=this;t.preventDefault();var a=JSON.parse(JSON.stringify(this.user)),r=this.validateObject(a,[{name:"name",type:"string"},{name:"password",type:"string"}]);if(r)return this.validation.errorMessage=r;this.$emit("loader","show"),this.axios({method:"post",url:"".concat("http://localhost:9000","/api/v1/auth/login"),data:a}).then((function(t){e.validation.success=!0,e.$store.dispatch("login",t.data.user),localStorage["access-token"]=t.data.token,e.$emit("redirect","index")})).catch((function(t){var a=t.response.data.error?t.response.data.error:t.message;e.validation.errorMessage=a})).then((function(){e.$emit("loader","hide")}))}},mixins:[v],created:function(){this.$store.state.auth.isAuthorized&&this.$emit("redirect","index")}},Z=X,tt=Object(w["a"])(Z,K,W,!1,null,"1baee31f",null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),a("div",[a("div",{staticClass:"col-md-7 mx-auto bg-white rounded shadow py-3 px-4 my-5"},[a("h2",{staticClass:"text-center font-weight-light"},[t._v("Create new blog")]),a("form",[a("div",{staticClass:"form-group mb-4"},[a("label",{attrs:{for:"blog-title"}},[t._v("Blog title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.title,expression:"blog.title"}],staticClass:"form-control",attrs:{type:"text",id:"blog-title",placeholder:"Enter blog title",required:""},domProps:{value:t.blog.title},on:{input:function(e){e.target.composing||t.$set(t.blog,"title",e.target.value)}}})]),a("p",{staticClass:"mb-1"},[t._v("Blog image")]),a("div",{staticClass:"custom-file mb-4"},[a("input",{ref:"blog-image",staticClass:"custom-file-input",attrs:{type:"file",id:"blog-image",required:"",accept:"image/*"},on:{change:function(e){return t.handleFileUpload()}}}),a("label",{ref:"blog-image-label",staticClass:"custom-file-label",attrs:{for:"blog-image"}},[t._v("Choose image")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"blog-content"}},[t._v("Blog content")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.blog.content,expression:"blog.content"}],staticClass:"form-control",attrs:{id:"blog-content",rows:"5",required:""},domProps:{value:t.blog.content},on:{input:function(e){e.target.composing||t.$set(t.blog,"content",e.target.value)}}})]),a("p",{staticClass:"mb-2"},[t._v("Blog tags")]),a("div",{staticClass:"d-flex flex-wrap pb-4"},t._l(t.tags,(function(e,r){return a("div",{key:e,staticClass:"form-check px-3 border mr-3 mb-2 rounded border-primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.tags,expression:"blog.tags"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"tag-"+r},domProps:{value:e,checked:Array.isArray(t.blog.tags)?t._i(t.blog.tags,e)>-1:t.blog.tags},on:{change:function(a){var r=t.blog.tags,o=a.target,s=!!o.checked;if(Array.isArray(r)){var i=e,n=t._i(r,i);o.checked?n<0&&t.$set(t.blog,"tags",r.concat([i])):n>-1&&t.$set(t.blog,"tags",r.slice(0,n).concat(r.slice(n+1)))}else t.$set(t.blog,"tags",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"tag-"+r}},[t._v(t._s(e)+" ")])])})),0),a("div",{staticClass:"text-center pb-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.createNewBlog()}}},[t._v("Create blog")])]),a("p",{staticClass:"text-center text-danger font-weight-500"},[t._v(t._s(t.validation.errorMessage))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.validation.success,expression:"validation.success"}],staticClass:"text-center text-success font-weight-500"},[t._v("Blog created successfuly!")])])]),a("div",{staticClass:"col-md-7 mx-auto bg-white rounded shadow py-3 px-4 my-5"},[a("div",{},[a("h3",{staticClass:"text-center text-primary pointer"},[t._v("Preview")]),a("div",{staticClass:"mx-3 mt-4 bg-light border p-3 preview-blog"},[a("h5",{staticClass:"text-center mb-3"},[t._v(t._s(t.blog.title))]),a("p",{staticClass:"d-flex flex-wrap"},t._l(t.blog.tags,(function(e){return a("button",{key:e,staticClass:"btn btn-outline-primary rounded-25 px-2 py-1 mr-2 mb-2 tag"},[t._v("#"+t._s(e)+" ")])})),0),a("pre",[t._v(t._s(t.blog.content))]),a("p",{staticClass:"text-right mb-0"},[t._v("By "),a("span",{staticClass:"underline font-italic pointer"},[t._v(t._s(t.user.name))])])])])])])],1)},rt=[],ot={data:function(){return{tags:[],blog:{title:"Title",content:"Content",tags:[],image:null},validation:{success:!1,errorMessage:""}}},methods:{handleFileUpload:function(){this.blog.image=this.$refs["blog-image"].files[0],this.$refs["blog-image-label"].textContent=this.blog.image.name},createNewBlog:function(){var t=this,e=JSON.parse(JSON.stringify(this.blog));delete e.image;var a=this.validateObject(e,[{name:"title",type:"string"},{name:"content",type:"string"},{name:"tags",type:"array"}]);if(a)return this.validation.errorMessage=a;var r=this.createFormData(e);if(!this.blog.image)return this.validation.errorMessage="Please upload blog image!";r.append("image",this.blog.image),this.$emit("loader","show"),this.axios({method:"post",url:"".concat("http://localhost:9000","/api/v1/blogs/create"),headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage["access-token"])},data:r}).then((function(e){t.validation.success=!0,t.validation.errorMessage="",t.$store.dispatch("addNewBlog",e.data.data),setTimeout((function(){return t.$emit("redirect","blog.my")}),2e3)})).catch((function(e){var a=e.response.data.error?e.response.data.error:e.message;t.validation.errorMessage=a})).then((function(){return t.$emit("loader","hide")}))}},computed:{user:function(){return this.$store.state.auth.user}},components:{Navbar:L},mixins:[v],created:function(){var t=this;if(!this.$store.state.auth.isAuthorized)return this.$emit("redirect","auth.login");this.$emit("loader","show"),this.axios({method:"get",url:"".concat("http://localhost:9000","/api/v1/blogs/tags")}).then((function(e){return t.tags=e.data})).catch((function(t){return console.error(t)})).then((function(){return t.$emit("loader","hide")}))}},st=ot,it=(a("bb2a"),Object(w["a"])(st,at,rt,!1,null,"7282b6b4",null)),nt=it.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),a("div",[a("div",{staticClass:"col-md-7 mx-auto bg-white rounded shadow py-3 px-4 my-5"},[a("h2",{staticClass:"text-center font-weight-light mb-4"},[t._v("Edit "),a("span",{staticClass:"text-primary pointer"},[t._v("#"+t._s(t.blog._id))]),t._v(" blog")]),a("form",[a("div",{staticClass:"form-group mb-4"},[a("label",{attrs:{for:"blog-title"}},[t._v("Blog title")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.title,expression:"blog.title"}],staticClass:"form-control",attrs:{type:"text",id:"blog-title",placeholder:"Enter blog title",required:""},domProps:{value:t.blog.title},on:{input:function(e){e.target.composing||t.$set(t.blog,"title",e.target.value)}}})]),a("p",{staticClass:"mb-1"},[t._v("Blog image")]),a("img",{staticClass:"blog-image",attrs:{src:t.blog.image}}),a("div",{staticClass:"custom-file mb-4",attrs:{"data-toggle":"tooltip","data-placement":"right",title:"Upload image if you want to change. Optional field"}},[a("input",{ref:"blog-image",staticClass:"custom-file-input",attrs:{type:"file",id:"blog-image",required:"",accept:"image/*"},on:{change:function(e){return t.handleFileUpload()}}}),a("label",{ref:"blog-image-label",staticClass:"custom-file-label",attrs:{for:"blog-image"}},[t._v("Choose image")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"blog-content"}},[t._v("Blog content")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.blog.content,expression:"blog.content"}],staticClass:"form-control",attrs:{id:"blog-content",rows:"5",required:""},domProps:{value:t.blog.content},on:{input:function(e){e.target.composing||t.$set(t.blog,"content",e.target.value)}}})]),a("p",{staticClass:"mb-2"},[t._v("Blog tags")]),a("div",{staticClass:"d-flex flex-wrap pb-4"},t._l(t.tags,(function(e,r){return a("div",{key:e,staticClass:"form-check px-3 border mr-3 mb-2 rounded border-primary"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.tags,expression:"blog.tags"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"tag-"+r},domProps:{value:e,checked:Array.isArray(t.blog.tags)?t._i(t.blog.tags,e)>-1:t.blog.tags},on:{change:function(a){var r=t.blog.tags,o=a.target,s=!!o.checked;if(Array.isArray(r)){var i=e,n=t._i(r,i);o.checked?n<0&&t.$set(t.blog,"tags",r.concat([i])):n>-1&&t.$set(t.blog,"tags",r.slice(0,n).concat(r.slice(n+1)))}else t.$set(t.blog,"tags",s)}}}),a("label",{staticClass:"form-check-label",attrs:{for:"tag-"+r}},[t._v(t._s(e)+" ")])])})),0),a("div",{staticClass:"text-center pb-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.editBlog()}}},[t._v("Update blog")])]),a("p",{staticClass:"text-center text-danger font-weight-500"},[t._v(t._s(t.validation.errorMessage))]),a("p",{directives:[{name:"show",rawName:"v-show",value:t.validation.success,expression:"validation.success"}],staticClass:"text-center text-success font-weight-500"},[t._v("Blog updated successfuly!")])])])])],1)},ct=[],ut={data:function(){return{tags:[],blog:{_id:"",title:"",content:"",tags:[],image:"",editingImage:null},validation:{success:!1,errorMessage:""}}},methods:{createBlogData:function(t){if(this.$store.state.auth.user._id!==t.author.author)return this.$emit("redirect","blog.all");this.blog._id=t._id,this.blog.title=t.title,this.blog.content=t.content,this.blog.tags=t.tags,this.blog.image="".concat("http://localhost:9000","/").concat(t.image)},handleFileUpload:function(){this.blog.editingImage=this.$refs["blog-image"].files[0],this.$refs["blog-image-label"].textContent=this.blog.editingImage.name},editBlog:function(){var t=this,e=this.blog,a={title:e.title,content:e.content,tags:e.tags},r=this.validateObject(a,[{name:"title",type:"string"},{name:"content",type:"string"},{name:"tags",type:"array"}]);if(r)return this.validation.errorMessage=r;var o=this.createFormData(a);e.editingImage&&o.append("image",e.editingImage),this.$emit("loader","show"),this.axios({method:"put",url:"".concat("http://localhost:9000","/api/v1/blogs/edit/").concat(e._id),headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(localStorage["access-token"])},data:o}).then((function(a){t.validation.success=!0,t.validation.errorMessage="",t.$store.dispatch("blogEdited",a.data.data),setTimeout((function(){return t.$router.push({name:"blog.detail",params:{id:e._id}})}),2e3)})).catch((function(e){var a=e.response.data.error?e.response.data.error:e.message;t.validation.errorMessage=a})).then((function(){return t.$emit("loader","hide")}))}},components:{Navbar:L},mixins:[v],created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.$store.state.auth.isAuthorized){e.next=2;break}return e.abrupt("return",t.$emit("redirect","auth.login"));case 2:return t.$emit("loader","show"),e.prev=3,e.next=6,t.axios({method:"get",url:"".concat("http://localhost:9000","/api/v1/blogs/tags")});case 6:a=e.sent,t.tags=a.data,e.next=13;break;case 10:return e.prev=10,e.t0=e["catch"](3),e.abrupt("return",console.error(e.t0));case 13:if(r=t.$store.getters.getBlogById(t.$route.params.id),t.$emit("loader","hide"),r.author.author===t.$store.state.auth.user._id){e.next=17;break}return e.abrupt("return",t.$emit("redirect","blog.my"));case 17:t.createBlogData(r);case 18:case"end":return e.stop()}}),e,null,[[3,10]])})))()},mounted:function(){d()(".custom-file").tooltip()}},dt=ut,gt=(a("579a"),Object(w["a"])(dt,lt,ct,!1,null,"77c442b8",null)),mt=gt.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),a("h2",{staticClass:"text-center mt-4"},[t._v("All blogs")]),a("div",{staticClass:"col-md-9 d-flex flex-wrap px-0 py-4 mx-auto",attrs:{id:"filters"}},[a("div",{staticClass:"form-group col-md-6 pl-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.searchTitle,expression:"filter.searchTitle"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search from blog's title..."},domProps:{value:t.filter.searchTitle},on:{input:function(e){e.target.composing||t.$set(t.filter,"searchTitle",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6 pr-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.searchAuthor,expression:"filter.searchAuthor"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search author..."},domProps:{value:t.filter.searchAuthor},on:{input:function(e){e.target.composing||t.$set(t.filter,"searchAuthor",e.target.value)}}})]),a("div",{staticClass:"form-group col-12 px-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.searchContent,expression:"filter.searchContent"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search from blog's content..."},domProps:{value:t.filter.searchContent},on:{input:function(e){e.target.composing||t.$set(t.filter,"searchContent",e.target.value)}}})])]),a("div",{staticClass:"col-md-9 px-0 mx-auto mb-5 d-flex flex-wrap align-items-center"},[a("p",{staticClass:"mb-0 ml-auto mr-2"},[t._v("Sort by")]),a("div",{staticClass:"form-group pl-0 mb-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortBy=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"createdAt+"}},[t._v("Newest")]),a("option",{attrs:{value:"createdAt-"}},[t._v("Oldest")]),a("option",{attrs:{value:"likes+"}},[t._v("Most liked")]),a("option",{attrs:{value:"likes-"}},[t._v("Less liked")]),t.auth.isAuthorized?a("option",{attrs:{value:"user-liked"}},[t._v("My favourite")]):t._e()])])]),a("div",{staticClass:"col-md-9 px-0 pb-5 pt-5 mx-auto blogs-container"},t._l(t.filteredBlogs,(function(t){return a("BlogCard",{key:t._id,attrs:{blogData:t}})})),1)],1)},ht=[],ft={data:function(){return{filter:{searchTitle:"",searchAuthor:"",searchContent:""},sortBy:"createdAt+"}},methods:{},computed:{blogs:function(){return this.$store.state.blogs.allBlogs},auth:function(){return this.$store.state.auth}},components:{Navbar:L,BlogCard:P},mixins:[S]},bt=ft,vt=Object(w["a"])(bt,pt,ht,!1,null,"52dc520e",null),xt=vt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Navbar"),a("h2",{staticClass:"text-center mt-4"},[t._v("My blogs")]),a("div",{staticClass:"col-md-9 d-flex flex-wrap px-0 py-4 mx-auto",attrs:{id:"filters"}},[a("div",{staticClass:"form-group col-md-6 pl-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.searchTitle,expression:"filter.searchTitle"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search from blog's title..."},domProps:{value:t.filter.searchTitle},on:{input:function(e){e.target.composing||t.$set(t.filter,"searchTitle",e.target.value)}}})]),a("div",{staticClass:"form-group col-md-6 pr-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.searchAuthor,expression:"filter.searchAuthor"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search author..."},domProps:{value:t.filter.searchAuthor},on:{input:function(e){e.target.composing||t.$set(t.filter,"searchAuthor",e.target.value)}}})]),a("div",{staticClass:"form-group col-12 px-0"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.filter.searchContent,expression:"filter.searchContent"}],staticClass:"form-control",attrs:{type:"search",placeholder:"Search from blog's content..."},domProps:{value:t.filter.searchContent},on:{input:function(e){e.target.composing||t.$set(t.filter,"searchContent",e.target.value)}}})])]),a("div",{staticClass:"col-md-9 px-0 mx-auto mb-5 d-flex flex-wrap align-items-center"},[a("p",{staticClass:"mb-0 ml-auto mr-2"},[t._v("Sort by")]),a("div",{staticClass:"form-group pl-0 mb-0"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.sortBy,expression:"sortBy"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortBy=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"createdAt+"}},[t._v("Newest")]),a("option",{attrs:{value:"createdAt-"}},[t._v("Oldest")]),a("option",{attrs:{value:"likes+"}},[t._v("Most liked")]),a("option",{attrs:{value:"likes-"}},[t._v("Less liked")]),a("option",{attrs:{value:"user-liked"}},[t._v("My favourite")])])])]),a("div",{staticClass:"col-md-9 px-0 pb-5 mx-auto blogs-container"},t._l(t.filteredBlogs,(function(e){return a("BlogCard",{key:e._id,attrs:{blogData:e,anotherOptions:t.blogAnotherOptions}})})),1)],1)},wt=[],yt={data:function(){return{filter:{searchTitle:"",searchAuthor:"",searchContent:""},blogAnotherOptions:[{id:"edit",name:"Edit blog",color:"primary",run:void 0},{id:"delete",name:"Delete blog",color:"danger",run:void 0}],sortBy:"createdAt+"}},methods:{editBlog:function(t){this.$router.push({name:"blog.edit",params:{id:t._id}})},deleteBlogFunction:function(t){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return e.$emit("loader","show"),a.next=3,e.deleteBlog(t);case 3:e.$store.dispatch("blogDeleted",t._id),e.$emit("loader","hide");case 5:case"end":return a.stop()}}),a)})))()}},computed:{blogs:function(){return this.$store.getters.getUserBlogs()},user:function(){return this.$store.state.auth.user}},mixins:[S],components:{Navbar:L,BlogCard:P},created:function(){if(!this.$store.state.auth.isAuthorized)return this.$emit("redirect","auth.login");this.blogAnotherOptions[0].run=this.editBlog,this.blogAnotherOptions[1].run=this.deleteBlogFunction}},Ct=yt,kt=Object(w["a"])(Ct,_t,wt,!1,null,"f69af99c",null),$t=kt.exports,Bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Navbar"),r("div",{staticClass:"blog-container"},[r("div",{staticClass:"col-md-6 px-0 mx-auto py-5"},[r("h1",{staticClass:"font-weight-bold blog-title"},[t._v(t._s(t.blog.title))]),r("div",{staticClass:"d-flex justify-content-between"},[r("div",{staticClass:"author pt-3 vertical-center"},[r("img",{attrs:{src:a("f614"),width:"30",height:"30"}}),r("p",{staticClass:"ml-2 mb-0"},[t._v(t._s(t.blog.author.name))])]),t.auth.isAuthorized?r("div",{staticClass:"vertical-center like-button"},[r("svg",{staticClass:"bi mr-1 text-danger pointer",attrs:{width:"25",height:"25"},on:{click:function(e){return t.likeBlog()}}},[t.blog.isLiked?r("use",{attrs:{"xlink:href":a("28f0")+"#heart-fill"}}):r("use",{attrs:{"xlink:href":a("28f0")+"#heart"}})]),r("p",{class:{"font-weight-500":!0,"mb-0":!0,"text-muted":!t.blog.isLiked,"text-danger":t.blog.isLiked}},[t._v(t._s(t.blog.likes))])]):t._e()])]),r("div",{staticClass:"text-center"},[r("img",{staticClass:"rounded blog-image shadow-sm",attrs:{src:t.blogImage}})]),r("div",{staticClass:"col-md-6 px-0 mx-auto pt-5"},[r("p",{staticClass:"content"},[t._v(t._s(t.blog.content))]),r("p",{staticClass:"d-flex flex-wrap pt-4 pb-5 mb-0"},t._l(t.blog.tags,(function(e){return r("button",{key:e,staticClass:"btn btn-outline-primary rounded-25 px-2 py-1 mr-2 mb-2 tag"},[t._v("#"+t._s(e)+" ")])})),0)])])],1)},At=[],Ot={data:function(){return{toggleLikeLoading:!1}},methods:{likeBlog:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var a,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.toggleLikeLoading||!t.auth.isAuthorized){e.next=9;break}return t.toggleLikeLoading=!0,a=t.blog.isLiked?"-":"+",r={blog:t.blog._id,action:a},e.next=6,t.toggleLikeRequest(r);case 6:o=e.sent,t.$store.dispatch("toggleLike",{data:r,user:o}),t.toggleLikeLoading=!1;case 9:case"end":return e.stop()}}),e)})))()}},computed:{blog:function(){return this.$store.getters.getBlogById(this.$route.params.id)},auth:function(){return this.$store.state.auth},blogImage:function(){return"".concat("http://localhost:9000","/").concat(this.blog.image)}},components:{Navbar:L},mixins:[S]},Nt=Ot,Dt=(a("42d7"),Object(w["a"])(Nt,Bt,At,!1,null,"368cfd2f",null)),Lt=Dt.exports,jt=[{name:"index",path:"/",component:F,meta:{auth:"0"}},{name:"auth.register",path:"/auth/register",component:G,meta:{auth:"-"}},{name:"auth.login",path:"/auth/login",component:et,meta:{auth:"-"}},{name:"blog.all",path:"/blogs/all",component:xt,meta:{auth:"0"}},{name:"blog.my",path:"/blogs/my",component:$t,meta:{auth:"+"}},{name:"blog.detail",path:"/blogs/blog/:id",component:Lt,meta:{auth:"0"}},{name:"blog.create",path:"/blogs/create",component:nt,meta:{auth:"+"}},{name:"blog.edit",path:"/blogs/edit/:id",component:mt,meta:{auth:"+"}}],qt=new i["a"]({mode:"history",routes:jt});qt.beforeResolve((function(t,e,a){var r=t.matched[0].meta.auth;"+"!=r||localStorage["access-token"]?a():a({name:"auth.login"})}));var Rt=qt,St=(a("7db0"),a("c740"),a("a434"),a("2f62"));r["a"].use(St["a"]);var Et=new St["a"].Store({state:{auth:{isAuthorized:!1,user:{_id:"",likedBlogs:[],name:""}},blogs:{loaded:!1,allBlogs:[]}},getters:{getBestBlogsOfToday:function(t){var e=t.blogs.allBlogs.sort((function(t,e){return e.likes-t.likes||new Date(e.createdAt)-new Date(t.createdAt)}));return e.splice(9),e},getUserBlogs:function(t){return function(){return t.blogs.allBlogs.filter((function(e){return e.author.author===t.auth.user._id}))}},getBlogById:function(t){return function(e){return t.blogs.allBlogs.find((function(t){return t._id===e}))}}},mutations:{login:function(t,e){t.auth.isAuthorized=!0,t.auth.user=e},logout:function(t){t.auth.isAuthorized=!1,t.auth.user={_id:"",likedBlogs:[],name:""}},addNewBlog:function(t,e){t.blogs.allBlogs.push(e)},blogEdited:function(t,e){var a=t.blogs.allBlogs.findIndex((function(t){return t._id===e._id}));t.blogs.allBlogs[a]=e},blogDeleted:function(t,e){var a=t.blogs.allBlogs.findIndex((function(t){return t._id===e}));t.blogs.allBlogs.splice(a,1)},blogLiked:function(t,e){var a=e.blogID,r=e.user;t.auth.user=r;var o=t.blogs.allBlogs.findIndex((function(t){return t._id===a})),s=t.blogs.allBlogs[o];s.likes+=1,s.isLiked=!0},blogDisliked:function(t,e){var a=e.blogID,r=e.user;t.auth.user=r;var o=t.blogs.allBlogs.findIndex((function(t){return t._id===a})),s=t.blogs.allBlogs[o];s.likes-=1,s.isLiked=!1}},actions:{checkUserAuthorization:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.state.auth.isAuthorized){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,p.methods.checkAuthorization();case 4:a=e.sent,a.isAuthorized?t.commit("login",a.user):t.commit("logout");case 6:case"end":return e.stop()}}),e)})))()},login:function(t,e){var a=t.commit;return a("login",e)},logout:function(t){var e=t.commit;return e("logout")},addNewBlog:function(t,e){var a=t.commit;return a("addNewBlog",e)},blogEdited:function(t,e){var a=t.commit;return a("blogEdited",e)},blogDeleted:function(t,e){var a=t.commit;return a("blogDeleted",e)},getAllBlogs:function(t){return Object(c["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.state.blogs.loaded){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,S.methods.getAllBlogs(t.state.auth);case 4:a=e.sent,t.state.blogs.loaded=!0,t.state.blogs.allBlogs=a;case 7:case"end":return e.stop()}}),e)})))()},toggleLike:function(t,e){var a=t.commit,r=e.data,o=e.user;"+"==r.action?a("blogLiked",{blogID:r.blog,user:o}):a("blogDisliked",{blogID:r.blog,user:o})}}});a("4989"),a("ab8b");r["a"].config.productionTip=!1,r["a"].use(s.a,m.a),r["a"].use(i["a"]),new r["a"]({render:function(t){return t(C)},router:Rt,store:Et}).$mount("#app")},"579a":function(t,e,a){"use strict";a("60ec")},5845:function(t,e,a){},"60ec":function(t,e,a){},"755b":function(t,e,a){t.exports=a.p+"img/clock.729ef53b.svg"},"85ec":function(t,e,a){},"9a8b":function(t,e,a){},bb2a:function(t,e,a){"use strict";a("0f2b")},f614:function(t,e,a){t.exports=a.p+"img/default_user_image.e729c98c.png"}});
//# sourceMappingURL=app.187b385b.js.map